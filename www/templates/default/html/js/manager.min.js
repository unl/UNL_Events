var ordinal=function(e){var t=e%100;return 11<=t&&t<=13?e+"th":t%10==1?e+"st":t%10==2?e+"nd":t%10==3?e+"rd":e+"th"};setRecurringOptions=function(e,t,o){var n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=e.val().substring(6,10),i=e.val().substring(0,2),s=parseInt(e.val().substring(3,5)),r=n[new Date(a,i-1,s).getDay()],l={1:"First",2:"Second",3:"Third",4:"Fourth",5:"Last"},c=28;for(v=new Date(a,i-1,28);c==v.getDate();)v=new Date(a,i-1,++c);c--;for(var d=0,u=0,m=1;m<=c;m++){var v=new Date(a,i-1,m);n[v.getDay()]==r&&m<=s&&d++,n[v.getDay()]==r&&u++}t.children(".dynamicRecurring").remove();var h="";null!=l[d]&&(h="",o==l[d].toLowerCase()&&(h=' selected="selected" '),t.prepend("<option class='dynamicRecurring' "+h+"value='"+l[d].toLowerCase()+"'>"+l[d]+" "+r+" of every month</option>")),4==d&&4==u&&(h="","last"==o&&(h=' selected="selected" '),t.prepend("<option class='dynamicRecurring' "+h+"value='last'>Last "+r+" of every month</option>")),c==s&&(h="","lastday"==o&&(h=' selected="selected" '),t.prepend("<option class='dynamicRecurring' "+h+"value='lastday'>Last day of every month</option>"));var f=ordinal(s)+" of every month";h="","date"==o&&(h=' selected="selected" '),t.prepend("<option class='dynamicRecurring' "+h+"value='date'>"+f+"</option>")},require(["jquery","wdn",frontend_url+"templates/default/html/js/vendor/select2/js/select2.min.js"],function(o,e){o(document).ready(function(){o("form").on("change blur","input",function(){o(this).removeClass("validation-failed")}),o(".use-select2").select2(),o("#bulk-action").change(function(){var e=[];if(o(".select-event").each(function(){o(this).is(":checked")&&e.push(parseInt(o(this).attr("data-id")))}),0<e.length){o("#bulk-action-ids").val(e.join(",")),o("#bulk-action-action").val(o(this).val());var t=null;if("delete"==o(this).val())t="Are you sure you want to delete these "+e.length.toString()+" events?";else if("move-to-upcoming"==o(this).val())t="Are you sure to move these "+e.length.toString()+' events to "Upcoming"?';else{if("move-to-pending"!=o(this).val())return;t="Are you sure to move these "+e.length.toString()+' events to "Pending"?'}window.confirm(t)&&o("#bulk-action-form").submit()}}),o("#checkbox-toggle").click(function(e){console.log("click checkbox toggle",o(this).is(":checked")),o(".select-event").prop("checked",o(this).is(":checked"))}),o(".pending-event-tools, .upcoming-event-tools, .past-event-tools, .searched-event-tools").change(function(){"recommend"==o(this).val()?window.location=o(this).attr("data-recommend-url"):"delete"==o(this).val()?window.confirm("Are you sure you want to delete this event?")&&o("#delete-"+o(this).attr("data-id")).submit():"move-to-upcoming"==o(this).val()?(o("#move-target-"+o(this).attr("data-id")).val("upcoming"),o("#move-"+o(this).attr("data-id")).submit()):"move-to-pending"==o(this).val()?(o("#move-target-"+o(this).attr("data-id")).val("pending"),o("#move-"+o(this).attr("data-id")).submit()):"promote"==o(this).val()?(o("#promote-target-"+o(this).attr("data-id")).val("promote"),o("#promote-"+o(this).attr("data-id")).submit()):"hide-promo"==o(this).val()&&(o("#promote-target-"+o(this).attr("data-id")).val("hide-promo"),o("#promote-"+o(this).attr("data-id")).submit())}),o("#toggle-search").click(function(e){e.preventDefault(),o("#search-form").slideToggle(400,function(){o("#search-form").is(":visible")&&o("#search-form input").focus()})}),notifier={mark_input_invalid:function(e){e.addClass("validation-failed")},failure:function(e,t){o("#notice").removeClass("affirm").addClass("negate").removeClass("alert"),o("#notice h4").text(e),o("#notice .message-content").html(t),o("#notice").fadeIn(),window.scrollTo(0,0)},info:function(e,t){o("#notice").removeClass("affirm").removeClass("negate").removeClass("alert"),o("#notice h4").text(e),o("#notice .message-content").html(t),o("#notice").fadeIn(),window.scrollTo(0,0)},success:function(e,t){o("#notice").addClass("affirm").removeClass("negate").removeClass("alert"),o("#notice h4").text(e),o("#notice .message-content").html(t),o("#notice").fadeIn(),window.scrollTo(0,0)},alert:function(e,t){o("#notice").removeClass("affirm").removeClass("negate").addClass("alert"),o("#notice h4").text(e),o("#notice .message-content").html(t),o("#notice").fadeIn(),window.scrollTo(0,0)}}})});