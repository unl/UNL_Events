var ordinal=function(e){var t=e%100;return 11<=t&&t<=13?e+"th":t%10==1?e+"st":t%10==2?e+"nd":t%10==3?e+"rd":e+"th"};Date.prototype.isValid=function(){return!isNaN(this.getTime())},setRecurringOptions=function(e,t,n){if(e.val()){var o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],i=new Date(e.val());if(i.isValid()){var c=i.getFullYear(),a=i.getMonth()+1,s=i.getDate(),r=o[i.getDay()],d={1:"First",2:"Second",3:"Third",4:"Fourth",5:"Last"},l=28;for(h=new Date(c,a-1,28);l==h.getDate();)h=new Date(c,a-1,++l);l--;for(var u=0,f=0,m=1;m<=l;m++){var h=new Date(c,a-1,m);o[h.getDay()]==r&&m<=s&&u++,o[h.getDay()]==r&&f++}t.children(".dynamicRecurring").remove();var v="";null!=d[u]&&(v="",n==d[u].toLowerCase()&&(v=' selected="selected" '),t.prepend("<option class='dynamicRecurring' "+v+"value='"+d[u].toLowerCase()+"'>"+d[u]+" "+r+" of every month</option>")),4==u&&4==f&&(v="","last"==n&&(v=' selected="selected" '),t.prepend("<option class='dynamicRecurring' "+v+"value='last'>Last "+r+" of every month</option>")),l==s&&(v="","lastday"==n&&(v=' selected="selected" '),t.prepend("<option class='dynamicRecurring' "+v+"value='lastday'>Last day of every month</option>"));var g=ordinal(s)+" of every month";v="","date"==n&&(v=' selected="selected" '),t.prepend("<option class='dynamicRecurring' "+v+"value='date'>"+g+"</option>")}}},require(["jquery","wdn",frontend_url+"templates/default/html/js/vendor/select2/js/select2.min.js"],function(n,e){n(document).ready(function(){n("form").on("change blur","input",function(){n(this).removeClass("validation-failed")}),n(".use-select2").select2(),n("#bulk-action").change(function(){var e=[];if(n(".select-event").each(function(){n(this).is(":checked")&&e.push(parseInt(n(this).attr("data-id")))}),0<e.length){n("#bulk-action-ids").val(e.join(",")),n("#bulk-action-action").val(n(this).val());var t=null;if("delete"==n(this).val())t="Are you sure you want to delete these "+e.length.toString()+" events?";else if("move-to-upcoming"==n(this).val())t="Are you sure to move these "+e.length.toString()+' events to "Upcoming"?';else{if("move-to-pending"!=n(this).val())return;t="Are you sure to move these "+e.length.toString()+' events to "Pending"?'}window.confirm(t)&&n("#bulk-action-form").submit()}}),n("#checkbox-toggle").click(function(e){n(".select-event").prop("checked",n(this).is(":checked"))}),n("#recurring").is(":checked")&&n(".recurring-container").show(),n("#recurring").click(function(e){n(this).is(":checked")?n(".recurring-container").show():n(".recurring-container").hide()}),n(".pending-event-tools, .upcoming-event-tools, .past-event-tools, .searched-event-tools").change(function(){"recommend"==n(this).val()?window.location=n(this).attr("data-recommend-url"):"delete"==n(this).val()?window.confirm("Are you sure you want to delete this event?")&&n("#delete-"+n(this).attr("data-id")).submit():"move-to-upcoming"==n(this).val()?(n("#move-target-"+n(this).attr("data-id")).val("upcoming"),n("#move-"+n(this).attr("data-id")).submit()):"move-to-pending"==n(this).val()?(n("#move-target-"+n(this).attr("data-id")).val("pending"),n("#move-"+n(this).attr("data-id")).submit()):"promote"==n(this).val()?(n("#promote-target-"+n(this).attr("data-id")).val("promote"),n("#promote-"+n(this).attr("data-id")).submit()):"hide-promo"==n(this).val()&&(n("#promote-target-"+n(this).attr("data-id")).val("hide-promo"),n("#promote-"+n(this).attr("data-id")).submit())}),n("#toggle-search").click(function(e){e.preventDefault(),n("#search-form").slideToggle(400,function(){n("#search-form").is(":visible")&&n("#search-form input").focus()})}),notifier={mark_input_invalid:function(e){e.addClass("validation-failed")},failure:function(e,t){notifier.check(e,t,"dcf-notice-danger"),n("#notice").removeClass("dcf-notice-info").removeClass("dcf-notice-success").removeClass("dcf-notice-warning").addClass("dcf-notice-danger"),n("#notice h2").text(e),n("#notice .dcf-notice-message").html(t),n("#notice").fadeIn(),window.scrollTo(0,0)},info:function(e,t){notifier.check(e,t,"dcf-notice-info"),n("#notice").addClass("dcf-notice-info").removeClass("dcf-notice-success").removeClass("dcf-notice-warning").removeClass("dcf-notice-danger"),n("#notice h2").text(e),n("#notice .dcf-notice-message").html(t),n("#notice").fadeIn(),window.scrollTo(0,0)},success:function(e,t){notifier.check(e,t,"dcf-notice-success"),n("#notice").removeClass("dcf-notice-info").addClass("dcf-notice-success").removeClass("dcf-notice-warning").removeClass("dcf-notice-danger"),n("#notice h2").text(e),n("#notice .dcf-notice-message").html(t),n("#notice").fadeIn(),window.scrollTo(0,0)},alert:function(e,t){notifier.check(e,t,"dcf-notice-warning"),n("#notice").removeClass("dcf-notice-info").removeClass("dcf-notice-success").addClass("dcf-notice-warning").removeClass("dcf-notice-danger"),n("#notice h2").text(e),n("#notice .dcf-notice-message").html(t),n("#notice").fadeIn(),window.scrollTo(0,0)},check:function(n,o,i){var c=document.getElementById("noticeContainer"),a=document.getElementById("notice");c&&!a&&require(["dcf-notice"],function(e){var t=new e.DCFNotice;(a=t.appendNotice(c,n,o,i)).setAttribute("id","notice")})}}})});