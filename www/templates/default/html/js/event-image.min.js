require.config({paths:{cropperjs:"/js/cropperjs"}}),require(["cropperjs/cropper.min","css!cropperjs/cropper.min.css"],function(t){var n,r,c=document.getElementById("cropper-errors"),m=document.getElementById("cropper-content"),l=document.getElementById("source-image"),i=document.getElementById("cropped-image-container"),a=document.getElementById("cropped-image"),o=document.getElementById("cropped-image-data"),d=document.getElementById("imagedata"),e=document.getElementById("image-modal"),p=document.getElementById("cancel-crop-btn"),g=document.getElementById("crop-btn"),s=new DCFModal([]),u=[];d.addEventListener("change",function(e){function t(e){l.src=e,s.openModal("image-modal")}var n,i,a=e.target.files;if(a&&0<a.length)if(function(e){switch(u=[],e.type){case"image/png":case"image/jpeg":case"image/gif":case"image/avif":case"image/webp":break;default:u.push("Invalid file type ("+e.type+").  Allowed types: avif, gif, jpeg, png and webp.")}if(8388608<e.size){var t=e.size/1024/1024;u.push("File size ("+t.toFixed(2)+" MB) over limit of 8 MB.")}return 0===u.length}(i=a[0]))r="image/jpeg"===i.type?i.type:"image/png",URL?t(URL.createObjectURL(i)):FileReader&&((n=new FileReader).onload=function(e){t(n.result)},n.readAsDataURL(i));else{c.innerHTML="";for(var o=0;o<u.length;o++){var d=document.createElement("LI");d.innerText=u[o],c.append(d)}c.removeAttribute("hidden"),m.setAttribute("hidden",""),s.openModal("image-modal")}}),p.addEventListener("click",function(e){s.closeModal("image-modal")}),g.addEventListener("click",function(e){n.getCroppedCanvas({minWidth:150,minHeight:150,maxWidth:4096,maxHeight:4096,fillColor:"#fff",imageSmoothingEnabled:!0,imageSmoothingQuality:"high"}).toBlob(function(e){url=URL.createObjectURL(e);var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){var e=t.result;a.setAttribute("src",e),i.removeAttribute("hidden"),o.value=e,s.closeModal("image-modal")}},r,.9)}),document.addEventListener("ModalOpenEvent_"+e.id,function(e){n=new t(l,{aspectRatio:1,viewMode:3,preview:".preview-image"})}),document.addEventListener("ModalCloseEvent_"+e.id,function(e){d.value="",n.destroy(),n=null})});