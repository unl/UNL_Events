require.config({paths:{cropperjs:"/js/cropperjs"}}),require(["cropperjs/cropper.min","css!cropperjs/cropper.min.css"],function(t){function o(e){var t;i="image/jpeg"===e.type?e.type:"image/png",FileReader&&((t=new FileReader).onload=function(e){!function(e){a.src=e,u.openModal("image-modal")}(t.result)},t.readAsDataURL(e))}var n,i,d=document.getElementById("cropper-errors"),r=document.getElementById("cropper-content"),a=document.getElementById("source-image"),c=document.getElementById("cropped-image-container"),m=document.getElementById("cropped-image"),l=document.getElementById("cropped-image-data"),p=document.getElementById("imagedata"),e=document.getElementById("image-modal"),g=document.getElementById("cancel-crop-btn"),s=document.getElementById("crop-btn"),u=new DCFModal([]),f=[];p.addEventListener("change",function(e){var t=e.target.files;if(t&&0<t.length){var n=t[0];if(function(e){switch(f=[],e.type){case"image/png":case"image/jpeg":case"image/gif":case"image/avif":case"image/webp":break;default:f.push("Invalid file type ("+e.type+").  Allowed types: avif, gif, jpeg, png and webp.")}if(8388608<e.size){var t=e.size/1024/1024;f.push("File size ("+t.toFixed(2)+" MB) over limit of 8 MB.")}return 0===f.length}(n))o(n);else{d.innerHTML="";for(var i=0;i<f.length;i++){var a=document.createElement("LI");a.innerText=f[i],d.append(a)}d.removeAttribute("hidden"),r.setAttribute("hidden",""),u.openModal("image-modal")}}}),g.addEventListener("click",function(e){u.closeModal("image-modal")}),s.addEventListener("click",function(e){n.getCroppedCanvas({minWidth:150,minHeight:150,maxWidth:4096,maxHeight:4096,fillColor:"#fff",imageSmoothingEnabled:!0,imageSmoothingQuality:"high"}).toBlob(function(e){var t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){var e=t.result;m.setAttribute("src",e),c.removeAttribute("hidden"),l.value=e,u.closeModal("image-modal")}},i,.9)}),document.addEventListener("ModalOpenEvent_"+e.id,function(e){n=new t(a,{aspectRatio:1,viewMode:3,preview:".preview-image"})}),document.addEventListener("ModalCloseEvent_"+e.id,function(e){p.value="",n.destroy(),n=null})});