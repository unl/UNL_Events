function isUrlValid(e){let t;try{t=new URL(e)}catch{return!1}return"http:"===t.protocol||"https:"===t.protocol}const time_mode_radios=Array.from(document.querySelectorAll('input[type="radio"][name="time_mode"]')),time_container=document.getElementById("time-container"),start_time_container=document.getElementById("start-time-container"),end_time_container=document.getElementById("end-time-container"),google_microdata_button=(time_mode_radios.forEach(e=>{e.addEventListener("input",()=>{var e=time_mode_radios.filter(e=>e.checked)[0];e.id===window.UNL_Events.time_mode_regular?(time_container.classList.remove("dcf-d-none"),start_time_container.classList.remove("dcf-d-none"),end_time_container.classList.remove("dcf-d-none")):e.id===window.UNL_Events.time_mode_end_time_only?(time_container.classList.remove("dcf-d-none"),start_time_container.classList.add("dcf-d-none"),end_time_container.classList.remove("dcf-d-none")):e.id===window.UNL_Events.time_mode_start_time_only?(time_container.classList.remove("dcf-d-none"),start_time_container.classList.remove("dcf-d-none"),end_time_container.classList.add("dcf-d-none")):time_container.classList.add("dcf-d-none")})}),document.getElementById("google-microdata-button"));function testMicrodata(e=!0){let t=!0;const n=document.getElementById("google-microdata-button"),a=document.getElementById("google-microdata-modal-output");let i="";var o,d,l,r=document.getElementById("title"),u=document.getElementById("start-date"),c=document.getElementById("physical_location_check"),s=document.getElementById("virtual_location_check"),m=document.getElementById("contact-name"),v=document.getElementById("contact-website"),_=document.querySelector('input[name="contact_type"]:checked');""==r.value&&(e&&(i+="<li>Missing title</li>"),t=!1),""==u.value&&(e&&(i+="<li>Missing start date</li>"),t=!1),"0"==c.value&&"0"==s.value&&(e&&(i+="<li>Missing a location (Could be virtual, physical, or both)</li>"),t=!1),"1"==c.value&&("new"==(r=document.getElementById("location")).value?(u=document.getElementById("location-name"),c=document.getElementById("location-address-1"),o=document.getElementById("location-city"),d=document.getElementById("location-state"),l=document.getElementById("location-zip"),""==u.value&&(e&&(i+="<li>Missing a location name</li>"),t=!1),""==c.value&&(e&&(i+="<li>Missing a location address</li>"),t=!1),""==o.value&&(e&&(i+="<li>Missing a location city</li>"),t=!1),""==d.value&&(e&&(i+="<li>Missing a location state</li>"),t=!1),""==l.value&&(e&&(i+="<li>Missing a location zip</li>"),t=!1)):"true"!=r.options[r.selectedIndex].dataset.microdata&&(e&&(i+="<li>The Location you selected does not meet the requirements for microdata</li>"),t=!1)),"1"==s.value&&"new"==document.getElementById("v-location").value&&(u=document.getElementById("new-v-location-name"),c=document.getElementById("new-v-location-url"),""==u.value&&(e&&(i+="<li>Missing a virtual location name</li>"),t=!1),""==c.value&&(e&&(i+="<li>Missing a virtual location URL</li>"),t=!1),""==c.value||isUrlValid(c.value)||(e&&(i+="<li>Virtual location's URL is invalid</li>"),t=!1)),""===m.value&&""===v.value||(null===_&&(e&&(i+="<li>If organizer contact info is used the type must be specified</li>"),t=!1),(""!==m.value&&""===v.value||""===m.value&&""!==v.value)&&(e&&(i+="<li>Both the organizer name and organizer website must be set if either are used</li>"),t=!1)),t?(e&&(a.innerHTML="<span class='dcf-bold'>Your event is fulfilling all microdata requirements</span>"),n.innerHTML="Your event does reach microdata requirements",n.classList.remove("unl-bg-blue"),n.classList.add("unl-bg-green"),n.classList.remove("events-b-blue"),n.classList.add("events-b-green")):(e&&(a.innerHTML="<span class='dcf-bold'>Your event is missing these requirements:</span> <ul>"+i+"</ul>"),n.innerHTML="! Your event does not reach microdata requirements !",n.classList.add("unl-bg-blue"),n.classList.remove("unl-bg-green"),n.classList.add("events-b-blue"),n.classList.remove("events-b-green"))}document.addEventListener("ModalOpenEvent_"+google_microdata_button.dataset.togglesModal,()=>{testMicrodata(!0)}),document.addEventListener("click",e=>{testMicrodata(!1)}),document.addEventListener("input",e=>{testMicrodata(!1)}),document.getElementById("start-date").addEventListener("change",e=>{testMicrodata(!1)}),testMicrodata(!1);const send_to_main_inputs=document.querySelectorAll("input[type=radio][name=send_to_main]"),hidden_required_for_main_elements=document.querySelectorAll(".required-for-main-calendar"),create_form=(send_to_main_inputs.forEach(e=>{e.addEventListener("change",()=>{"on"===e.value?hidden_required_for_main_elements.forEach(e=>{e.classList.remove("dcf-d-none!")}):"off"===e.value&&hidden_required_for_main_elements.forEach(e=>{e.classList.add("dcf-d-none!")})}),e.checked&&"on"===e.value?hidden_required_for_main_elements.forEach(e=>{e.classList.remove("dcf-d-none!")}):e.checked&&"off"===e.value&&hidden_required_for_main_elements.forEach(e=>{e.classList.add("dcf-d-none!")})}),document.getElementById("create-event-form"));create_form.addEventListener("submit",e=>{e.preventDefault();var e=document.getElementById("title"),t=document.getElementById("type"),n=document.getElementById("start-date"),a=document.getElementById("start-time-am-pm-pm"),i=document.getElementById("start-time-hour"),o=document.getElementById("start-time-minute"),d=document.getElementById("end-time-am-pm-pm"),l=document.getElementById("end-time-hour"),r=document.getElementById("end-time-minute"),u=document.getElementById(window.UNL_Events.time_mode_regular),c=document.getElementById("recurring"),s=document.getElementById("recurring-type"),m=document.getElementById("recurs-until-date"),v=document.getElementById("physical_location_check"),_=document.getElementById("location"),g=document.getElementById("location-name"),p=document.getElementById("location-address-1"),f=document.getElementById("location-city"),y=document.getElementById("location-state"),E=document.getElementById("location-zip"),h=document.getElementById("location-webpage"),H=document.getElementById("virtual_location_check"),w=document.getElementById("v-location"),L=document.getElementById("new-v-location-name"),I=document.getElementById("new-v-location-url"),S=document.getElementById("send_to_main_on");const B=document.getElementById("description"),U=document.getElementById("contact-name");var k=document.querySelector('input[name="send_to_main"]:checked');const C=document.getElementById("cropped-image-data"),b=document.getElementById("contact-name");var N=document.querySelector('input[name="contact_type"]:checked'),D=document.getElementById("contact-type"),M=document.getElementById("contact-website"),q=document.getElementById("website");const Y=[];""!=e.value&&""!=t.value&&""!=n.value||(""==e.value&&window.UNL_Events.notifier.mark_input_invalid(e),""==n.value&&window.UNL_Events.notifier.mark_input_invalid(n),""==t.value&&window.UNL_Events.notifier.mark_input_invalid(t),Y.push('<a href="#title">Title</a>, <a href="#type">Type</a>, and <a href="#start-date">start date</a> are required.'));let R=new Date(n.value);e=a.checked?"pm":"am";let z=""!=i.value?parseInt(i.value)%12:0;z="pm"==e?z+12:z;t=""!=o.value?parseInt(o.value):0;R.setHours(z),R.setMinutes(t);let T=new Date(n.value);a=d.checked?"pm":"am";let V=""!=l.value?parseInt(l.value)%12:0;V="pm"==a?V+12:V;i=""!=r.value?parseInt(r.value):0,T.setHours(V),T.setMinutes(i),""!=n.value&&u.checked&&R>T&&(window.UNL_Events.notifier.mark_input_invalid(end_time_container),Y.push('Your <a href="#end-time-container">end time</a> must be on or after the <a href="#start-time-container">start time</a>.')),""!=n.value&&c.checked&&(""!=s.value&&""!=m.value||(""==s.value&&window.UNL_Events.notifier.mark_input_invalid(s),""==m.value&&window.UNL_Events.notifier.mark_input_invalid(m),Y.push('Recurring events require a <a href="#recurring-type">recurring type</a> and <a href="#recurs-until-date">date</a> that they recur until.')),R.setHours(0),R.setMinutes(0),e=new Date(m.value),R>e&&(window.UNL_Events.notifier.mark_input_invalid(m),Y.push('The <a href="#recurs-until-date">"recurs until date"</a> must be on or after the start date.'))),"1"==v.value&&("new"==_.value&&""==g.value&&(window.UNL_Events.notifier.mark_input_invalid(g),Y.push('You must give your new location a <a href="#location-name">name</a>.')),"new"==_.value&&""==p.value&&(window.UNL_Events.notifier.mark_input_invalid(p),Y.push('You must give your new location a <a href="#location-address-1">address</a>.')),"new"==_.value&&""==f.value&&(window.UNL_Events.notifier.mark_input_invalid(f),Y.push('You must give your new location a <a href="#location-city">city</a>.')),"new"==_.value&&""==y.value&&(window.UNL_Events.notifier.mark_input_invalid(y),Y.push('You must give your new location a <a href="#location-state">state</a>.')),"new"==_.value&&""==E.value&&(window.UNL_Events.notifier.mark_input_invalid(E),Y.push('You must give your new location a <a href="#location-zip">zip</a>.')),"new"!=_.value||""===h.value||isUrlValid(h.value)||(window.UNL_Events.notifier.mark_input_invalid(h),Y.push('<a href="#location-webpage"> Location URL</a> is not a valid URL.'))),"1"==H.value&&("new"==w.value&&""==L.value&&(window.UNL_Events.notifier.mark_input_invalid(L),Y.push('You must give your new virtual location a <a href="#new-v-location-name">name</a>.')),"new"==w.value&&""==I.value?(window.UNL_Events.notifier.mark_input_invalid(I),Y.push('You must give your new virtual location a <a href="#new-v-location-url">URL</a>.')):"new"!=w.value||""===I.value||isUrlValid(I.value)||(window.UNL_Events.notifier.mark_input_invalid(I),Y.push('<a href="#new-v-location-url">Virtual Location URL</a> is not a valid URL.'))),null===k||void 0===k.value?(window.UNL_Events.notifier.mark_input_invalid(S),Y.push('<a href="#send_to_main">Consider for main calendar</a> is required.')):"on"===k.value&&(""==B.value.trim()&&(window.UNL_Events.notifier.mark_input_invalid(B),Y.push('<a href="#description">Description</a> is required when event is considered for main calendar.')),""==U.value.trim()&&(window.UNL_Events.notifier.mark_input_invalid(U),Y.push('<a href="#contact-name">Contact Name</a> is required when event is considered for main calendar.')),""==C.value.trim()&&""==b.value.trim()&&(window.UNL_Events.notifier.mark_input_invalid(b),Y.push('<a href="#imagedata">Image</a> is required when event is considered for main calendar.'))),null!==N&&void 0!==N.value&&"person"!==N.value&&"organization"!==N.value&&(window.UNL_Events.notifier.mark_input_invalid(D),Y.push('<a href="#contact-type">Contact Type</a> must be person or organization.')),o=M.value,""==o||isUrlValid(o)||(window.UNL_Events.notifier.mark_input_invalid(M),Y.push('<a href="#contact_website">Contact Website</a> is not a valid URL.')),t=q.value;if(""==t||isUrlValid(t)||(window.UNL_Events.notifier.mark_input_invalid(q),Y.push('<a href="#website">Event Website</a> is not a valid URL.')),0<Y.length)return window.UNL_Events.notifier.alert("Sorry! We couldn't create your event","<ul><li>"+Y.join("</li><li>")+"</li></ul>"),!1;create_form.submit()});